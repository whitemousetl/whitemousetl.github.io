**1、多表关系**
```
一对多（多对一）
案例：部门 与 员工 的关系
关系：一个部门对应多个员工，一个员工对应一个部门
实现：在多的一方建立外键，指向一的一方的主键
添加外键语法：
创建表时
create table 表名(
    字段1 字段1类型，
    ... ,
    [constraint] [外键名称] foreign key(外键字段名) references 主表(主表列名)
);

alter table 表名 add constraint 外键名称 foreign (外键字段名) references 主表(主表列名)；
```
```
多对多
案例：学生 与 课程 的关系
关系：一个学生可以选修多门课程，一门课程也可以供多个学生选择
实现：建立第三张中间表，中间表至少包含两个外键，分别关联两方主键
```

```
一对一
案例：用户 与 用户详情 的关系
关系：一对一的关系，多用于单表拆分，将一张基础表字段放在一张表中，其他详情字段放在另一张表中，以提升操作效率（空间换时间）
实现：在任意一方加入外键，关联另外一方的主键，并且设置外键是唯一的（unique）
```

**2、多表查询概述**
```
概述：指从多张表中查询数据
笛卡尔积：笛卡尔积是指在数学中，两个集合A和B的所有组合情况（在多表查询时，需要消除无效的笛卡尔积）
```
```
多表查询分类：
- 连接查询
内连接：相当于重新A、B交集部分数据。
外连接：左外连接是查询左表所有数据，以及两张表交集部分数据；右外连接是查询右表所有数据，以及两张表交集部分数据。
自连接：当前表与自身的连接查询，自连接必须使用表别名。
- 子查询
```
**3、内连接**
```
内连接查询语法：
隐式内连接 select 字段列表 from 表1,表2 where 条件 ...;
显式内连接 select 字段列表 from 表1 [inner] join 表2 on 连接条件 ...;
```
内连接是查询两个集合交集部分数据
**4、外连接**
```
左外连接语法：
select 字段列表 from 表1 left [outer] join 表2 on 条件. ..; 
相当于查询表1（左表）的所有数据包含表1和表2交集部分数据
```
```
右外连接语法：
select 字段列表 from 表1 right[outer] join 表2 on 条件. ..; 
相当于查询表2（右表）的所有数据包含表1和表2交集部分数据
```
**5、自连接**
```
自连接语法：
select 字段列表 from 表A 别名A join 表A 别名B on 条件...;
```
自连接查询，可以是内连接查询，也可以是外连接查询

**6、联合查询union，union all**
对于union查询，就是把多次查询的结果合并起来，形成一个新的查询结果集
语法：
```
select 字段列表 from 表A
union [all] 
select 字段列表 from 表B ...;
```
没有all则会把合并的结果去重。
对于联合查询的多张表的列数必须保持一致，字段类型也需要保持一致。

**7、子查询**
概念：SQL语句中嵌套select语句，成为嵌套查询，又称为子查询
select * from t1 where column1 = （select column1 from t2）；
子查询外部的语句可以是 insert/update/delete/select 的任何一个
```
子查询分类：
1、标量子查询（子查询结果为单个值）
2、列子查询（子查询结果为一列）
3、行子查询（子查询结果为一行）
4、表子查询（子查询结果为多行多列）
```
根据子查询的位置，分为：where之后、from之后、select之后
```
标量子查询
子查询返回的结果是单个值（数字、日期、字符串等），最简单的形式，这种子查询成为标量子查询
标量子查询常用的操作符：=、 <>、 >、 >=、 <、 <=
```
```
列子查询
子查询返回结果是一列（可以是多行），这种子查询称为列子查询
常用的操作符：in、not in、any、some、all
in 在指定的集合范围之内，多选一
not in 不在指定的集合范围之内
any 子查询返回列表中，有任意一个满足即可
some 与any等同
all 子查询返回列表的所有值都必须满足
```
```
行子查询
子查询返回的结果是一行（可以是多列），这种子查询成为行子查询
常用的操作符：=、<>、in、not in
```
```
表子查询
子查询返回的结果是多行多列，这种子查询称为表子查询
常用的操作符：in、from
```